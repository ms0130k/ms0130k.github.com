import{d as K,r as h,h as U,j as T,k as G,c as r,a as q,w as J,F as w,b as t,l as c,v as A,i as B,m as _,e as g,p as j,n as D,f as H,t as o,o as u,_ as O}from"./index-Bf1Go4Ea.js";import{P as Q,a as X}from"./PageTwoColumn-BUfcyalG.js";import{a as Y}from"./index-xsH4HHeE.js";const Z={class:"container"},ee={class:"search-container"},te={class:"search-filters"},le={class:"filter-row"},ne={class:"filter-group"},se=["value"],ie={class:"filter-group"},oe={class:"filter-row"},ae={class:"filter-group"},re={class:"filter-section"},ue={class:"filter-row dimensions"},de={class:"filter-group"},ve={class:"filter-group"},pe={class:"filter-group"},he={class:"filter-section"},ce={class:"filter-row dimensions"},ge={class:"filter-group"},me={class:"filter-group"},fe={class:"filter-group"},ye={class:"filter-section"},be={class:"sorting-options"},Ce={class:"sort-controls"},we={class:"sort-left-group"},_e={class:"dimension-radio"},De={class:"radio-label"},ke={class:"radio-label"},We={class:"sort-dimensions"},He={class:"sort-toggle-group"},Ne={class:"sort-buttons"},xe={class:"sort-toggle-group"},Ve={class:"sort-buttons"},$e={class:"sort-toggle-group"},Pe={class:"sort-buttons"},Ue={class:"search-results"},Be={key:0,class:"loading-message"},Se={key:1,class:"error-message"},Fe={key:2},Le={class:"result-summary"},Me={key:0,class:"tolerance-info"},Te={key:1,class:"sort-info"},qe={key:0,class:"no-results"},Ae={key:1,class:"table-container"},je={class:"products-table"},Ee={class:"product-category"},Ie={class:"dimensions-cell"},Re={class:"dimension-values"},ze={class:"dimensions-cell"},Ke={class:"dimension-values"},Ge={key:2,class:"pagination"},Je=["disabled"],Oe={class:"page-numbers"},Qe=["onClick"],Xe=["disabled"],x=20,Ye=K({__name:"SearchView",setup(Ze){const V=h([]),$=h(!0),S=h(!1),s=h({name:"",innerWidth:"",innerDepth:"",innerHeight:"",outerWidth:"",outerDepth:"",outerHeight:""}),a=h(0),b=h([]),C=h("all"),F=h([]),f=h("inner"),i=h({width:"none",depth:"none",height:"none"}),m=h(1),N=U(()=>Math.ceil(b.value.length/x)),E=U(()=>{const n=(m.value-1)*x,e=n+x;return b.value.slice(n,e)}),P=n=>{n>=1&&n<=N.value&&(m.value=n)},k=(n,e)=>{i.value[n]===e?i.value[n]="none":i.value[n]=e,M()};T(async()=>{try{const n=await Y.get("/yjc-data.json");V.value=n.data,b.value=L([...n.data]);const e=new Set;n.data.forEach(l=>{l.mainCategory&&e.add(l.mainCategory)}),F.value=Array.from(e).sort(),$.value=!1}catch(n){console.error("데이터를 불러오는 중 오류가 발생했습니다:",n),S.value=!0,$.value=!1}});const L=n=>[...n].sort((e,l)=>{const d=e.mainCategory.localeCompare(l.mainCategory);if(d!==0)return d;const y=e.name.localeCompare(l.name);if(y!==0)return y;const v=e.outer.localeCompare(l.outer);return v!==0?v:e.inner.localeCompare(l.inner)}),I=n=>[...n].sort((e,l)=>{const d=f.value==="inner"?"inner":"outer";if(i.value.width!=="none"){const v=Number(e[`${d}Width`]||0),p=Number(l[`${d}Width`]||0);if(v!==p)return i.value.width==="asc"?v-p:p-v}if(i.value.depth!=="none"){const v=Number(e[`${d}Depth`]||0),p=Number(l[`${d}Depth`]||0);if(v!==p)return i.value.depth==="asc"?v-p:p-v}if(i.value.height!=="none"){const v=Number(e[`${d}Height`]||0),p=Number(l[`${d}Height`]||0);if(v!==p)return i.value.height==="asc"?v-p:p-v}const y=e.mainCategory.localeCompare(l.mainCategory);return y!==0?y:e.name.localeCompare(l.name)}),W=(n,e,l)=>{if(!n||!e||!l)return!1;if(isNaN(Number(n))||isNaN(Number(e)))return n.includes(e);const d=Number(n),y=Number(e);return d>=y-l&&d<=y+l},R=()=>{s.value={name:"",innerWidth:"",innerDepth:"",innerHeight:"",outerWidth:"",outerDepth:"",outerHeight:""},C.value="all",a.value=0,f.value="inner",i.value={width:"none",depth:"none",height:"none"},b.value=L([...V.value])},M=()=>{let n=V.value;if(C.value!=="all"&&(n=n.filter(e=>e.mainCategory===C.value)),s.value.name.trim()){const e=s.value.name.toLowerCase();n=n.filter(l=>l.name.toLowerCase().includes(e))}s.value.innerWidth.trim()&&(n=n.filter(e=>{var l;return a.value>0?W(e.innerWidth,s.value.innerWidth,a.value):(l=e.innerWidth)==null?void 0:l.includes(s.value.innerWidth)})),s.value.innerDepth.trim()&&(n=n.filter(e=>{var l;return a.value>0?W(e.innerDepth,s.value.innerDepth,a.value):(l=e.innerDepth)==null?void 0:l.includes(s.value.innerDepth)})),s.value.innerHeight.trim()&&(n=n.filter(e=>{var l;return a.value>0?W(e.innerHeight,s.value.innerHeight,a.value):(l=e.innerHeight)==null?void 0:l.includes(s.value.innerHeight)})),s.value.outerWidth.trim()&&(n=n.filter(e=>{var l;return a.value>0?W(e.outerWidth,s.value.outerWidth,a.value):(l=e.outerWidth)==null?void 0:l.includes(s.value.outerWidth)})),s.value.outerDepth.trim()&&(n=n.filter(e=>{var l;return a.value>0?W(e.outerDepth,s.value.outerDepth,a.value):(l=e.outerDepth)==null?void 0:l.includes(s.value.outerDepth)})),s.value.outerHeight.trim()&&(n=n.filter(e=>{var l;return a.value>0?W(e.outerHeight,s.value.outerHeight,a.value):(l=e.outerHeight)==null?void 0:l.includes(s.value.outerHeight)})),b.value=I(n),m.value=1},z=U(()=>b.value.length);return T(()=>{const n=new URLSearchParams(window.location.search),e=n.get("query"),l=n.get("category");e&&(s.value.name=e),l&&(C.value=l)}),G([s,C,a,f,i],()=>{M()},{deep:!0}),(n,e)=>(u(),r(w,null,[q(Q,{title:"제품 사이즈",description:"원하는 제품을 검색해 보세요."}),q(X,null,{right:J(()=>[t("div",Z,[t("div",ee,[t("div",te,[t("div",le,[t("div",ne,[e[20]||(e[20]=t("label",{for:"category-select"},"제품 분류",-1)),c(t("select",{id:"category-select","onUpdate:modelValue":e[0]||(e[0]=l=>C.value=l),class:"filter-input"},[e[19]||(e[19]=t("option",{value:"all"},"전체 분류",-1)),(u(!0),r(w,null,B(F.value,l=>(u(),r("option",{key:l,value:l},o(l),9,se))),128))],512),[[A,C.value]])]),t("div",ie,[e[22]||(e[22]=t("label",{for:"tolerance-select"},"±오차범위",-1)),c(t("select",{id:"tolerance-select","onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l),class:"filter-input"},e[21]||(e[21]=[t("option",{value:0},"오차범위 없음",-1),t("option",{value:10},"±10",-1),t("option",{value:20},"±20",-1),t("option",{value:30},"±30",-1),t("option",{value:40},"±40",-1),t("option",{value:50},"±50",-1),t("option",{value:60},"±60",-1)]),512),[[A,a.value]])])]),t("div",oe,[t("div",ae,[e[23]||(e[23]=t("label",{for:"name-input"},"제품명",-1)),c(t("input",{id:"name-input",type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.name=l),placeholder:"제품명 검색",class:"filter-input"},null,512),[[_,s.value.name]])])]),t("div",re,[e[27]||(e[27]=t("h3",{class:"filter-section-title"},"내경 규격",-1)),t("div",ue,[t("div",de,[e[24]||(e[24]=t("label",{for:"inner-width-input"},"가로",-1)),c(t("input",{id:"inner-width-input",type:"text","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.innerWidth=l),placeholder:"내경 가로",class:"filter-input"},null,512),[[_,s.value.innerWidth]])]),t("div",ve,[e[25]||(e[25]=t("label",{for:"inner-depth-input"},"세로",-1)),c(t("input",{id:"inner-depth-input",type:"text","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.innerDepth=l),placeholder:"내경 세로",class:"filter-input"},null,512),[[_,s.value.innerDepth]])]),t("div",pe,[e[26]||(e[26]=t("label",{for:"inner-height-input"},"높이",-1)),c(t("input",{id:"inner-height-input",type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.innerHeight=l),placeholder:"내경 높이",class:"filter-input"},null,512),[[_,s.value.innerHeight]])])])]),t("div",he,[e[31]||(e[31]=t("h3",{class:"filter-section-title"},"외경 규격",-1)),t("div",ce,[t("div",ge,[e[28]||(e[28]=t("label",{for:"outer-width-input"},"가로",-1)),c(t("input",{id:"outer-width-input",type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>s.value.outerWidth=l),placeholder:"외경 가로",class:"filter-input"},null,512),[[_,s.value.outerWidth]])]),t("div",me,[e[29]||(e[29]=t("label",{for:"outer-depth-input"},"세로",-1)),c(t("input",{id:"outer-depth-input",type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>s.value.outerDepth=l),placeholder:"외경 세로",class:"filter-input"},null,512),[[_,s.value.outerDepth]])]),t("div",fe,[e[30]||(e[30]=t("label",{for:"outer-height-input"},"높이",-1)),c(t("input",{id:"outer-height-input",type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>s.value.outerHeight=l),placeholder:"외경 높이",class:"filter-input"},null,512),[[_,s.value.outerHeight]])])])]),t("div",ye,[e[37]||(e[37]=t("h3",{class:"filter-section-title"},"정렬",-1)),t("div",be,[t("div",Ce,[t("div",we,[t("div",_e,[t("label",De,[c(t("input",{type:"radio","onUpdate:modelValue":e[9]||(e[9]=l=>f.value=l),value:"inner"},null,512),[[j,f.value]]),e[32]||(e[32]=g(" 내경 "))]),t("label",ke,[c(t("input",{type:"radio","onUpdate:modelValue":e[10]||(e[10]=l=>f.value=l),value:"outer"},null,512),[[j,f.value]]),e[33]||(e[33]=g(" 외경 "))])]),t("div",We,[t("div",He,[e[34]||(e[34]=t("span",{class:"sort-label"},"가로",-1)),t("div",Ne,[t("button",{onClick:e[11]||(e[11]=l=>k("width","asc")),class:D(["sort-toggle",{active:i.value.width==="asc"}]),title:"가로 오름차순"}," ▲ ",2),t("button",{onClick:e[12]||(e[12]=l=>k("width","desc")),class:D(["sort-toggle",{active:i.value.width==="desc"}]),title:"가로 내림차순"}," ▼ ",2)])]),t("div",xe,[e[35]||(e[35]=t("span",{class:"sort-label"},"세로",-1)),t("div",Ve,[t("button",{onClick:e[13]||(e[13]=l=>k("depth","asc")),class:D(["sort-toggle",{active:i.value.depth==="asc"}]),title:"세로 오름차순"}," ▲ ",2),t("button",{onClick:e[14]||(e[14]=l=>k("depth","desc")),class:D(["sort-toggle",{active:i.value.depth==="desc"}]),title:"세로 내림차순"}," ▼ ",2)])]),t("div",$e,[e[36]||(e[36]=t("span",{class:"sort-label"},"높이",-1)),t("div",Pe,[t("button",{onClick:e[15]||(e[15]=l=>k("height","asc")),class:D(["sort-toggle",{active:i.value.height==="asc"}]),title:"높이 오름차순"}," ▲ ",2),t("button",{onClick:e[16]||(e[16]=l=>k("height","desc")),class:D(["sort-toggle",{active:i.value.height==="desc"}]),title:"높이 내림차순"}," ▼ ",2)])])])]),t("div",{class:"filter-actions"},[t("button",{onClick:R,class:"clear-button"},"조건 초기화")])])])])])]),t("div",Ue,[$.value?(u(),r("div",Be,"데이터를 불러오는 중입니다...")):S.value?(u(),r("div",Se," 데이터를 불러오는 데 문제가 발생했습니다. 다시 시도해주세요. ")):(u(),r("div",Fe,[t("div",Le,[e[39]||(e[39]=g(" 검색 결과: ")),t("strong",null,o(z.value)+"개",1),e[40]||(e[40]=g("의 제품이 검색되었습니다. ")),a.value>0?(u(),r("span",Me," (±"+o(a.value)+" 오차범위 적용) ",1)):H("",!0),i.value.width!=="none"||i.value.depth!=="none"||i.value.height!=="none"?(u(),r("span",Te,[g(" ["+o(f.value==="inner"?"내경":"외경")+" 기준 ",1),i.value.width!=="none"?(u(),r(w,{key:0},[g(" 가로 "+o(i.value.width==="asc"?"▲":"▼"),1)],64)):H("",!0),i.value.depth!=="none"?(u(),r(w,{key:1},[g(o(i.value.width!=="none"?",":"")+" 세로 "+o(i.value.depth==="asc"?"▲":"▼"),1)],64)):H("",!0),i.value.height!=="none"?(u(),r(w,{key:2},[g(o(i.value.width!=="none"||i.value.depth!=="none"?",":"")+" 높이 "+o(i.value.height==="asc"?"▲":"▼"),1)],64)):H("",!0),e[38]||(e[38]=g(" ] "))])):H("",!0)]),b.value.length===0?(u(),r("div",qe,"검색 결과가 없습니다.")):(u(),r("div",Ae,[t("table",je,[e[41]||(e[41]=t("thead",null,[t("tr",null,[t("th",null,"순번"),t("th",{class:"product-category"},"분류"),t("th",null,"제품명"),t("th",null,[g(" 내경 "),t("div",{class:"dimension-header"},[t("span",null,"가로"),t("span",null,"세로"),t("span",null,"높이")])]),t("th",null,[g(" 외경 "),t("div",{class:"dimension-header"},[t("span",null,"가로"),t("span",null,"세로"),t("span",null,"높이")])]),t("th",null,"수량")])],-1)),t("tbody",null,[(u(!0),r(w,null,B(E.value,(l,d)=>(u(),r("tr",{key:d},[t("td",null,o((m.value-1)*x+d+1),1),t("td",Ee,o(l.mainCategory),1),t("td",null,o(l.name),1),t("td",Ie,[t("div",Re,[t("span",null,o(l.innerWidth||"-"),1),t("span",null,o(l.innerDepth||"-"),1),t("span",null,o(l.innerHeight||"-"),1)])]),t("td",ze,[t("div",Ke,[t("span",null,o(l.outerWidth||"-"),1),t("span",null,o(l.outerDepth||"-"),1),t("span",null,o(l.outerHeight||"-"),1)])]),t("td",null,o(l.quantity),1)]))),128))])])])),N.value>1?(u(),r("div",Ge,[t("button",{onClick:e[17]||(e[17]=l=>P(m.value-1)),class:"page-button",disabled:m.value===1}," 이전 ",8,Je),t("div",Oe,[(u(!0),r(w,null,B(N.value,l=>(u(),r("button",{key:l,onClick:d=>P(l),class:D(["page-number",{active:m.value===l}])},o(l),11,Qe))),128))]),t("button",{onClick:e[18]||(e[18]=l=>P(m.value+1)),class:"page-button",disabled:m.value===N.value}," 다음 ",8,Xe)])):H("",!0)]))])])]),_:1})],64))}}),nt=O(Ye,[["__scopeId","data-v-b1671e6e"]]);export{nt as default};
